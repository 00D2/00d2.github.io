import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-6SOse2EP.js";const l={};function h(t,s){return n(),a("div",null,s[0]||(s[0]=[e(`<blockquote><p>本文档的使用说明基于docker compose部署。<br> acme.sh的新版本默认CA为zerossl，可以在执行命令时使用--server参数指定CA。<br> 也可以通过下面的命令进行默认CA的调整：<code>acme.sh --set-default-ca --server letsencrypt</code>。<br> 支持的CA列表，详见<a href="https://github.com/acmesh-official/acme.sh/wiki/Server" target="_blank" rel="noopener noreferrer">https://github.com/acmesh-official/acme.sh/wiki/Server</a></p></blockquote><h2 id="docker-compose-yaml文件" tabindex="-1"><a class="header-anchor" href="#docker-compose-yaml文件"><span>docker-compose.yaml文件</span></a></h2><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  acme-sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">neilpang/acme.sh</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">acme.sh</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    environment</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">CF_Account_ID=&quot;登录CloudFlare后，浏览器URL后面的一串ID&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # CF_Account_ID仅适用于多个Zone的情况。如果Token只管理单个Zone，则不能添加该变量。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">CF_Token=&quot;登录后，在MyProfiles中API Tokens页面手动创建&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">./out:/acme.sh</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    network_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">host</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">daemon</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    stdin_open</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    tty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">unless-stopped</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h2><ul><li>容器启动</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>证书申请</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> acme.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --register-account</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shijinguosjg@gmail.com</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> acme.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --issue</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --test</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.self-domain.com</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dns</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns_cf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 注意--test参数，是连接至letsencrypt的测试网站上进行证书申请及签发，不会被签发为真实有效的证书，仅用于测试目的。正式申请时，应删除该参数。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> acme.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --issue</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.self-domain.com</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dns</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns_cf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> exec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> acme.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --issue</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.self-domain.com</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dns</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dns_cf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --force</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">参考链接</p><ol><li><a href="https://github.com/acmesh-official/acme.sh/wiki/Run-acme.sh-in-docker" target="_blank" rel="noopener noreferrer">https://github.com/acmesh-official/acme.sh/wiki/Run-acme.sh-in-docker</a></li><li><a href="https://github.com/acmesh-official/acme.sh/wiki/dnsapi" target="_blank" rel="noopener noreferrer">https://github.com/acmesh-official/acme.sh/wiki/dnsapi</a></li><li><a href="https://github.com/acmesh-official/acme.sh/wiki/deploy-to-docker-containers" target="_blank" rel="noopener noreferrer">https://github.com/acmesh-official/acme.sh/wiki/deploy-to-docker-containers</a></li><li><a href="https://gongdear.com/articles/2024/07/23/1721745308242.html" target="_blank" rel="noopener noreferrer">https://gongdear.com/articles/2024/07/23/1721745308242.html</a></li></ol></div>`,9)]))}const p=i(l,[["render",h],["__file","acme.sh.html.vue"]]),d=JSON.parse('{"path":"/tools/Docker/acme.sh.html","title":"使用acme.sh自动申请SSL证书","lang":"zh-CN","frontmatter":{"icon":"docker","title":"使用acme.sh自动申请SSL证书","author":"小苹果儿","date":"2024-10-19T00:00:00.000Z","category":["Docker"],"tag":["docker","容器"]},"headers":[{"level":2,"title":"docker-compose.yaml文件","slug":"docker-compose-yaml文件","link":"#docker-compose-yaml文件","children":[]},{"level":2,"title":"使用","slug":"使用","link":"#使用","children":[]}],"git":{"createdTime":1729344617000,"updatedTime":1729344617000,"contributors":[{"name":"00D2","username":"00D2","email":"shijinguosjg@gmail.com","commits":1,"url":"https://github.com/00D2"}]},"readingTime":{"minutes":1.07,"words":322},"filePathRelative":"tools/Docker/acme.sh.md","localizedDate":"2024年10月19日","excerpt":"<blockquote>\\n<p>本文档的使用说明基于docker compose部署。<br>\\nacme.sh的新版本默认CA为zerossl，可以在执行命令时使用--server参数指定CA。<br>\\n也可以通过下面的命令进行默认CA的调整：<code>acme.sh  --set-default-ca  --server letsencrypt</code>。<br>\\n支持的CA列表，详见<a href=\\"https://github.com/acmesh-official/acme.sh/wiki/Server\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/acmesh-official/acme.sh/wiki/Server</a></p>\\n</blockquote>"}');export{p as comp,d as data};
